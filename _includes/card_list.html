<ul class="horizontal-list">
  {% for item in include.collection %}
    {% assign item_id = item.slug | default: item.title | slugify %}

    <li class="card" 
        role="button" 
        tabindex="0"
        onclick="openModal('modal-{{ item_id }}')"
        onkeypress="if(event.key==='Enter') openModal('modal-{{ item_id }}')">

      <div class="card-inner">
        <span class="header">{{ item.title }}</span>
        <hr />
        {% if item.desc %}
        <p class="body">{{ item.desc }}</p>
        {% endif %}
      </div>
    </li>
  {% endfor %}
</ul>


<!-- Modals -->
{% for item in include.collection %}
  {% assign item_id = item.slug | default: item.title | slugify %}

  <div id="modal-{{ item_id }}" class="modal" aria-hidden="true">
    
    <div class="modal-backdrop" onclick="closeModal('modal-{{ item_id }}')"></div>

    <div class="modal-content">
      <button class="modal-close" onclick="closeModal('modal-{{ item_id }}')">&times;</button>

      <h2>{{ item.title }}</h2>

      {% if item.desc %}
      <h3>{{ item.desc }}</h3>
      {% endif %}

      {% if item.abstract %}
      <div class="modal-abstract">
        {{ item.abstract | markdownify }}
      </div>
      {% endif %}

      {% if item.external_link %}
      <p>
        <a class="button" href="{{ item.external_link }}" target="_blank">
          Deliverable
        </a>
      </p>
      {% endif %}

    </div>
  </div>
{% endfor %}

<script>
function openModal(id) {
  const m = document.getElementById(id);
  if (m) m.setAttribute('aria-hidden', 'false');
}

function closeModal(id) {
  const m = document.getElementById(id);
  if (m) m.setAttribute('aria-hidden', 'true');
}
</script>

